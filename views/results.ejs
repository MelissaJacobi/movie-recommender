<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Recommendations</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <%- include("partials/header") %>
  <main class="main">
    <h1>Recommended Movies</h1>

    <% if (movies && movies.length > 0) { %>
      <ul>
        <% movies.forEach(movie => { %>
          <li class="result"><%= movie.movies %></li>
          <img src="<%= movie.image_url %>" alt="<%= movie.movies %>" width="200">

          <% if (movie.trailer && movie.trailer.includes("youtu")) { %>
            <iframe width="500" height="281" src="https://www.youtube.com/embed/<%= movie.trailer.split('v=')[1] %>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <% } else if (movie.trailer) { %>
            <video controls>
              <source src="<%= movie.trailer %>" alt="<%= movie.title %>" width="500" type="video/mp4">
            </video>
          <% } else { %>
            <p>No trailer available</p>
          <% } %>

        <% }) %>
      </ul>
    <% } else { %>
      <p>No movies found matching your criteria.</p>
    <% } %>
    <a href="/">Try Again</a>
  </main>
</body>
<%- include("partials/footer") %>
</html>
