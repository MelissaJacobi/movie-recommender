<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Recommendations</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <%- include("partials/header") %>
  <main class="main">
    <h1>Recommended Movies</h1>

    <% if (movies && movies.length > 0) { %>
      <ul>
        <% movies.forEach(movie => { %>
          <li class="result"><%= movie.movies %></li>
          <img src="<%= movie.image_url %>" alt="<%= movie.movies %>" width="200">
          <p><%= movie.description || "Description not available." %></p>

          <% if (movie.trailer && movie.trailer.includes("youtu")) { %>
            <iframe 
              width="800" 
              height="481" 
              src="https://www.youtube.com/embed/<%= movie.trailer.split('youtu.be/')[1].split('?')[0] %>" 
              frameborder="0" 
              allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen
            ></iframe>
          <% } else { %>
            <p>No trailer available</p>
          <% } %>

        <% }) %>
      </ul>
    <% } else { %>
      <p>No movies found matching your criteria.</p>
    <% } %>
    <a href="/">Try Again</a>
  </main>
</body>
<%- include("partials/footer") %>
</html>
